import{j as e,O as x,r as u,m,N as g,R as d,a as h}from"./index-f2785db8.js";import{C as p,H as f,T as j}from"./handleAsync-d1fec055.js";import{S as N}from"./App-08b7ce26.js";import{u as P}from"./useTMDB-4048cb23.js";import{u as S,I as v}from"./infinteScrollerTrigger-c375282e.js";import"./index-6d2467d1.js";const y=()=>e.jsxs(p,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-6xl",children:"Search"}),e.jsx(N,{defaultVisibility:!0})]}),e.jsx(x,{})]});async function R(a,r=1){return P("/3/search/movie?query="+a+"&page="+r)}const I=a=>{const{data:r,error:t,isLoading:n,fetchNextPage:i,hasNextPage:c}=S(["search",a],({pageParam:s=1})=>R(a,s),{getNextPageParam:(s,o)=>s.page+1<s.total_pages?s.page+1:null}),l=u.useCallback(()=>{c&&i()},[c]);return{movies:r==null?void 0:r.pages.flatMap(s=>s.results),error:t,loading:n,fetchNextPage:l,hasNextPage:c}},T=()=>{const[a,r]=m(),t=a.get("query");if(!t)return;const{movies:n,error:i,loading:c,fetchNextPage:l,hasNextPage:s}=I(t);return e.jsx(f,{loading:c,error:i,children:e.jsxs("div",{className:`grid grid-cols-2 md:grid-cols-4
    lg:grid-cols-6 xl:grid-cols-8 gap-2`,children:[e.jsx("h2",{className:"col-span-full",children:t}),n!==void 0&&n.map(o=>e.jsx(g,{to:`/movie/${o.id}`,className:`scale-100 hover:scale-110 transform
            transition-transform duration-300`,children:e.jsx(j,{type:"poster",path:o.poster_path},o.id)})),s&&e.jsx(v,{fetchNextPage:l})]})})},B=()=>e.jsx(d,{children:e.jsx(h,{path:"",element:e.jsx(y,{}),children:e.jsx(h,{path:"",element:e.jsx(T,{})})})});export{B as default};
