import{Q as p,u as x}from"./handleAsync-eb33b0bf.js";import{m as P,o as b,q as m,p as M,r as i,j as I}from"./index-451883d1.js";class N extends p{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:P()},t)}getOptimisticResult(e){return e.behavior=P(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var r,a,c,o,u,h;const{state:n}=e,f=super.createResult(e,t),{isFetching:g,isRefetching:v}=f,d=g&&((r=n.fetchMeta)==null||(a=r.fetchMore)==null?void 0:a.direction)==="forward",l=g&&((c=n.fetchMeta)==null||(o=c.fetchMore)==null?void 0:o.direction)==="backward";return{...f,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:b(t,(u=n.data)==null?void 0:u.pages),hasPreviousPage:m(t,(h=n.data)==null?void 0:h.pages),isFetchingNextPage:d,isFetchingPreviousPage:l,isRefetching:v&&!d&&!l}}}function Q(s,e,t){const r=M(s,e,t);return x(r,N)}function R(s){const[e,t]=i.useState(!1),r=i.useMemo(()=>new IntersectionObserver(([a])=>t(a.isIntersecting)),[s]);return i.useEffect(()=>(r.observe(s.current),()=>r.disconnect()),[]),e}const y=s=>{const e=i.useRef(null),t=R(e);return i.useEffect(()=>{t&&s.fetchNextPage()},[t]),I.jsx("div",{ref:e,style:{transform:`translateY(${(s.padding||0)*-1}px)`}})};export{y as I,Q as u};
