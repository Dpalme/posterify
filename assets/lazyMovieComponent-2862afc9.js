import{g as f,r as l,j as t,H as x,T as b,a as p,b as j}from"./index-bcf7a057.js";import{u as y,R as k,I as g}from"./responsiveBackground-76494bc6.js";const w=r=>{const{data:i,error:c,isLoading:e}=y({queryKey:["movies",r],queryFn:()=>f(r)});return{movie:i,error:c,loading:e}},_=j("/movies/$movieId");function C(){const r=_.useParams().movieId,i=l.useRef(null),c=l.useRef(null),{movie:e,loading:h,error:m}=w(r),n=l.useMemo(()=>{var a;return(a=e==null?void 0:e.images)==null?void 0:a.logos.filter(s=>s.iso_639_1==e.original_language)},[e]),u=l.useMemo(()=>{var a;return((a=e==null?void 0:e.images)==null?void 0:a.posters.sort((s,o)=>o.height-s.height+(o.width-s.width)))??[]},[e]),d=l.useMemo(()=>{var a;return((a=e==null?void 0:e.images)==null?void 0:a.backdrops.sort((s,o)=>o.height-s.height+(o.width-s.width)))??[]},[e]);return t.jsxs(x,{loading:h,error:m,children:[t.jsxs("div",{className:"fixed top-0 flex h-screen w-screen flex-col justify-end gap-4",children:[!!e&&!!e.backdrop_path&&t.jsx(k,{imagePath:e.backdrop_path}),t.jsxs("div",{style:{"--tw-to-opacity":0},className:"flex w-full flex-col items-start justify-end gap-4 overscroll-auto bg-opacity-50 bg-gradient-to-r from-black via-[#0008] to-transparent p-8 pb-28 text-white drop-shadow-lg filter",children:[n!==void 0&&n.length>0?t.jsx(b,{type:"logo",path:n[0].file_path,alt:e==null?void 0:e.title,fullSize:!0,className:"!w-96 object-contain object-left-bottom drop-shadow-md filter"}):t.jsx("h1",{className:"font-title text-4xl font-extrabold",children:e==null?void 0:e.title}),t.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[t.jsxs("p",{className:"font-bold",children:[e==null?void 0:e.release_date.slice(0,4),(e==null?void 0:e.title)!=(e==null?void 0:e.original_title)&&t.jsxs(t.Fragment,{children:[" | ",t.jsx("span",{className:"font-thin italic",children:e==null?void 0:e.original_title})]})]}),t.jsxs("p",{className:"opacity-50",children:[e==null?void 0:e.vote_average.toFixed(1)," / 10"]})]})]})]}),t.jsx("div",{className:"h-[90dvh]"}),t.jsx("div",{className:"bg-white !bg-opacity-50 p-8 backdrop-blur-md backdrop-filter dark:bg-black",ref:i,children:t.jsx(p,{customScrollParent:i.current,listClassName:"grid grid-cols-[repeat(auto-fill,minmax(10rem,1fr))] gap-4",data:u,itemContent:(a,s)=>t.jsx(g,{type:"poster",movie_id:r,...s},s.file_path)})}),t.jsx("div",{className:"bg-white !bg-opacity-50 p-8 backdrop-blur-md backdrop-filter dark:bg-black",ref:c,children:t.jsx(p,{customScrollParent:c.current,totalCount:d.length,className:"mt-16",listClassName:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",data:d,increaseViewportBy:{top:window.innerHeight*.9,bottom:0},itemContent:(a,s)=>l.createElement(g,{type:"backdrop",movie_id:r,...s,key:s.file_path})})})]})}export{C as default};
