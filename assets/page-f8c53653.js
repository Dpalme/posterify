import{j as a,d as l}from"./index-f2e3d7b6.js";import{T as c,C as d,H as g}from"./handleAsync-a80247d2.js";import{u as p}from"./useTMDB-dddac186.js";import{u as x,I as m}from"./infinteScrollerTrigger-96cf301c.js";import{F as u}from"./fallbackPosters-cd012f4f.js";async function f(e){return p("/3/movie/popular?page="+e)}const h=()=>{const{data:e,error:r,isLoading:t,fetchNextPage:n,hasNextPage:i}=x(["feed"],({pageParam:s=1})=>f(s),{getNextPageParam:(s,o)=>s.page+1<s.total_pages?s.page+1:null,getPreviousPageParam:(s,o)=>s.page-1>0?s.page-1:null});return{movies:e==null?void 0:e.pages.flatMap(s=>s.results),error:r,loading:t,fetchNextPage:n,hasNextPage:i}};function j({movie:e}){return a.jsxs(l,{to:`/movie/${e.id}`,className:`scale-100 hover:scale-110 hover:z-2 transform
                transition-transform duration-300`,children:[a.jsx("div",{style:{aspectRatio:"0.667 / 1"},children:a.jsx(c,{type:"poster",path:e.poster_path})}),a.jsxs("div",{className:"p-2",children:[a.jsx("h2",{className:"text-sm mb-1 truncate",children:e.title}),a.jsx("p",{className:"text-xs",children:e==null?void 0:e.release_date.slice(0,4)})]})]},e.id)}const v=()=>{const{movies:e,error:r,loading:t,fetchNextPage:n,hasNextPage:i}=h();return a.jsx(d,{gridClass:"!grid-cols-1",children:a.jsx("div",{className:`grid grid-cols-2 md:grid-cols-4
        lg:grid-cols-6 xl:grid-cols-8 gap-2`,children:a.jsxs(g,{loading:t,error:r,fallback:a.jsx(u,{numberOfPosters:25}),children:[e!==void 0&&e.map(s=>a.jsx(j,{movie:s},s.id)),i&&a.jsx(m,{fetchNextPage:n,padding:32})]})})})};export{v as default};
