import{r as g,c as d,j as e,d as h}from"./index-f2e3d7b6.js";import{H as p,T as m,C as u}from"./handleAsync-a80247d2.js";import{S as x}from"./App-4632546c.js";import{u as f}from"./useTMDB-dddac186.js";import{u as j,I as N}from"./infinteScrollerTrigger-96cf301c.js";import{F as P}from"./fallbackPosters-cd012f4f.js";async function v(t="",o=1){return t===""?{page:1,total_pages:1,results:[],total_results:0}:f("/3/search/movie?query="+t+"&page="+o).then(a=>(a.results=a.results.filter(s=>!!s.poster_path&&!!s.backdrop_path),a))}const S=(t="")=>{const{data:o,error:a,isLoading:s,fetchNextPage:i,hasNextPage:l}=j(["search",t],({pageParam:r=1})=>v(t,r),{getNextPageParam:(r,n)=>r.page+1<r.total_pages?r.page+1:null}),c=g.useCallback(()=>{l&&i()},[l]);return{movies:o==null?void 0:o.pages.flatMap(r=>r.results),error:a,loading:s,fetchNextPage:c,hasNextPage:l}},_=()=>{const[t,o]=d(),a=t.get("query"),{movies:s,error:i,loading:l,fetchNextPage:c,hasNextPage:r}=S(a||"");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-2 md:grid-cols-4
        lg:grid-cols-6 xl:grid-cols-8 gap-2`,children:e.jsxs(p,{loading:l,error:i,fallback:e.jsx(P,{numberOfPosters:25}),children:[!!s&&s.length==0&&!!t.get("query")&&e.jsx("p",{className:"font-title text-3xl",children:"No results"}),s!==void 0&&s.map(n=>e.jsx(h,{to:`/movie/${n.id}`,className:`scale-100 hover:scale-110 transform
            transition-transform duration-300`,children:e.jsx(m,{type:"poster",path:n.poster_path},n.id)}))]})}),!!s&&s.length>0&&r&&e.jsx(N,{fetchNextPage:c,padding:64})]})},T=()=>e.jsxs(u,{gridClass:"!grid-cols-1 relative",children:[e.jsx("div",{className:"flex flex-col gap-2 fixed top-[80vh] left-1/2 z-10 -translate-x-1/2 transform md:hidden",children:e.jsx(x,{})}),e.jsx(_,{})]});export{T as default};
