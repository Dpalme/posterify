import{u as l,r as u,c as g,j as r,H as x,F as h,M as f,b as m}from"./index-99fbb267.js";const d=(e="")=>{const{data:t,error:n,isLoading:o,fetchNextPage:c,hasNextPage:s}=l({queryKey:["search",e],queryFn:({pageParam:a})=>g(e,a),initialPageParam:1,getNextPageParam:(a,N)=>a.page+1<a.total_pages?a.page+1:null}),i=u.useCallback(()=>{s&&c()},[s]);return{movies:t==null?void 0:t.pages.flatMap(a=>a.results),error:n,loading:o,fetchNextPage:i,hasNextPage:s}},p=m("/search");function P(e){window.localStorage.setItem("lastMovieSearch",String(e))}function b(){const{query:e}=p.useSearch(),{movies:t,error:n,loading:o,fetchNextPage:c}=d(e),s=Number(window.localStorage.getItem("lastMovieSearch")||0);return r.jsxs(x,{loading:o,error:n,fallback:r.jsx(h,{numberOfPosters:25}),children:[!!t&&t.length==0&&e&&r.jsx("p",{className:"font-title text-3xl",children:"No results"}),r.jsx(f,{movies:t,fetchNextPage:c,initialIndex:s,setInitialIndex:P})]})}export{b as default};
